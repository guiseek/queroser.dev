<form [formGroup]="form" (submit)="onSubmit()">

  <section class="row col gap-8">
    <mat-form-field>
      <mat-label> Título </mat-label>
      <input matInput cdkFocusInitial formControlName="title" />
      <mat-error> Obrigatório </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label> Introdução </mat-label>
      <textarea #input matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1"
        cdkAutosizeMaxRows="10" formControlName="intro"></textarea>
      <mat-hint align="end" class="text-muted">{{input.value.length}} / 400</mat-hint>
      <mat-error> Obrigatório </mat-error>
    </mat-form-field>
  </section>


  <mat-accordion formArrayName="steps">
    <mat-expansion-panel *ngFor="let step of form.steps.controls">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{step.value.title}}
        </mat-panel-title>
        <mat-panel-description>
          {{step.value.subtitle}}
        </mat-panel-description>
      </mat-expansion-panel-header>

    </mat-expansion-panel>
  </mat-accordion>


  <button type="button" mat-raised-button (click)="form.addStep()">
    Adicionar nova seção
  </button>

  <pre>{{form.value | json}}</pre>


</form>